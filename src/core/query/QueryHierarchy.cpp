/**
 * @file QueryHierarchy.cpp
 * @author Paul Blottiere paul.blottiere@oslandia.com
 * @date 28 Jun 2016
 */

#include "QueryHierarchy.hpp"

Json::Value part(int rec, int rec_end)
{
  Json::Value v;








































  rec++;
  if ( rec != rec_end )
  {
    v["n"] = 500000;

    if ( rec != (rec_end-1) )
    {
      v["nwu"] = part(rec, rec_end);
      v["nwd"] = part(rec, rec_end);
      v["neu"] = part(rec, rec_end);
      v["ned"] = part(rec, rec_end);
      v["swu"] = part(rec, rec_end);
      v["swd"] = part(rec, rec_end);
      v["seu"] = part(rec, rec_end);
      v["sed"] = part(rec, rec_end);
    }
  }

  return v;
}

std::string build_fake_hierarchy()
{
  Json::Value h = part( 0, 6 );
  Json::StyledWriter writer;
  return writer.write( h );
}

QueryHierarchy::QueryHierarchy()
  : Query()
{
}

QueryHierarchy::~QueryHierarchy()
{
}

bool QueryHierarchy::run( Database *db )
{
  bool rc = true;

  _result = build_fake_hierarchy();

  // empty response for now, just to see if potre is complaining...
  //_result = "{}";
  //_result = "{\"n\":97002,\"ned\":{\"n\":91152,\"neu\":{\"n\":34726,\"neu\":{\"n\":873,\"seu\":{\"n\":46},\"swu\":{\"n\":26}},\"nwu\":{\"n\":1226,\"seu\":{\"n\":34},\"swu\":{\"n\":123}},\"seu\":{\"n\":10373,\"neu\":{\"n\":39},\"nwu\":{\"n\":304},\"seu\":{\"n\":61},\"swu\":{\"n\":70}},\"swu\":{\"n\":27162,\"neu\":{\"n\":609},\"nwu\":{\"n\":892},\"seu\":{\"n\":241},\"swu\":{\"n\":470}}},\"nwu\":{\"n\":37382,\"neu\":{\"n\":1610,\"seu\":{\"n\":122},\"swu\":{\"n\":127}},\"nwu\":{\"n\":1158,\"seu\":{\"n\":63},\"swu\":{\"n\":113}},\"seu\":{\"n\":42016,\"neu\":{\"n\":1369},\"nwu\":{\"n\":1562},\"seu\":{\"n\":589},\"swu\":{\"n\":928}},\"swu\":{\"n\":30112,\"neu\":{\"n\":758},\"nwu\":{\"n\":1443},\"seu\":{\"n\":609},\"swu\":{\"n\":521}}},\"seu\":{\"n\":94626,\"neu\":{\"n\":36901,\"neu\":{\"n\":646},\"nwu\":{\"n\":951},\"seu\":{\"n\":819},\"swu\":{\"n\":990}},\"nwu\":{\"n\":43477,\"neu\":{\"n\":1286},\"nwu\":{\"n\":865},\"seu\":{\"n\":1336},\"swu\":{\"n\":1215}},\"seu\":{\"n\":37699,\"neu\":{\"n\":909},\"nwu\":{\"n\":827},\"seu\":{\"n\":803},\"swu\":{\"n\":981}},\"swu\":{\"n\":37228,\"neu\":{\"n\":417},\"nwu\":{\"n\":471},\"seu\":{\"n\":847},\"swu\":{\"n\":810}}},\"swu\":{\"n\":91896,\"neu\":{\"n\":37586,\"neu\":{\"n\":613},\"nwu\":{\"n\":714},\"seu\":{\"n\":500},\"swu\":{\"n\":913}},\"nwu\":{\"n\":27090,\"neu\":{\"n\":304},\"nwu\":{\"n\":296},\"seu\":{\"n\":853},\"swu\":{\"n\":1276}},\"seu\":{\"n\":36103,\"neu\":{\"n\":560},\"nwu\":{\"n\":533},\"seu\":{\"n\":537},\"swu\":{\"n\":758}},\"swu\":{\"n\":42700,\"neu\":{\"n\":768},\"nwu\":{\"n\":1480},\"seu\":{\"n\":1048},\"swu\":{\"n\":1452}}}},\"neu\":{\"n\":26251,\"ned\":{\"n\":27540,\"ned\":{\"n\":28},\"nwd\":{\"n\":81,\"sed\":{\"n\":4}},\"sed\":{\"n\":11662,\"ned\":{\"n\":78},\"nwd\":{\"n\":60},\"sed\":{\"n\":98},\"swd\":{\"n\":123}},\"swd\":{\"n\":6181,\"ned\":{\"n\":23},\"nwd\":{\"n\":17},\"sed\":{\"n\":97},\"swd\":{\"n\":44}}},\"nwd\":{\"n\":13118,\"nwd\":{\"n\":126,\"sed\":{\"n\":1}},\"sed\":{\"n\":1080,\"ned\":{\"n\":2},\"sed\":{\"n\":19},\"swd\":{\"n\":6}},\"swd\":{\"n\":6242,\"ned\":{\"n\":46},\"nwd\":{\"n\":6},\"sed\":{\"n\":84},\"swd\":{\"n\":66}}},\"sed\":{\"n\":336,\"nwd\":{\"n\":155,\"swd\":{\"n\":2}},\"swd\":{\"n\":110,\"nwd\":{\"n\":4},\"sed\":{\"n\":1}}},\"swd\":{\"n\":14540,\"ned\":{\"n\":283,\"ned\":{\"n\":2},\"nwd\":{\"n\":2},\"swd\":{\"n\":1}},\"nwd\":{\"n\":5312,\"ned\":{\"n\":58},\"nwd\":{\"n\":42},\"sed\":{\"n\":54},\"swd\":{\"n\":7}},\"sed\":{\"n\":375,\"ned\":{\"n\":5},\"swd\":{\"n\":2}},\"swd\":{\"n\":1577,\"ned\":{\"n\":42},\"sed\":{\"n\":9},\"swd\":{\"n\":3}}}},\"nwd\":{\"n\":64981,\"neu\":{\"n\":39955,\"neu\":{\"n\":1579,\"seu\":{\"n\":118},\"swu\":{\"n\":120}},\"nwu\":{\"n\":1580,\"seu\":{\"n\":124},\"swu\":{\"n\":135}},\"seu\":{\"n\":43155,\"neu\":{\"n\":1515},\"nwu\":{\"n\":1593},\"seu\":{\"n\":742},\"swu\":{\"n\":828}},\"swu\":{\"n\":41288,\"neu\":{\"n\":1524},\"nwu\":{\"n\":1624},\"seu\":{\"n\":768},\"swu\":{\"n\":866}}},\"nwu\":{\"n\":28782,\"neu\":{\"n\":1581,\"seu\":{\"n\":120},\"swu\":{\"n\":129}},\"nwu\":{\"n\":980,\"seu\":{\"n\":120},\"swu\":{\"n\":31}},\"seu\":{\"n\":45967,\"neu\":{\"n\":1549},\"nwu\":{\"n\":1606},\"seu\":{\"n\":943},\"swu\":{\"n\":1584}},\"swu\":{\"n\":26122,\"neu\":{\"n\":1460},\"nwu\":{\"n\":238},\"seu\":{\"n\":1164},\"swu\":{\"n\":52}}},\"seu\":{\"n\":76515,\"neu\":{\"n\":27672,\"neu\":{\"n\":467},\"nwu\":{\"n\":452},\"seu\":{\"n\":816},\"swu\":{\"n\":523}},\"nwu\":{\"n\":37031,\"neu\":{\"n\":481},\"nwu\":{\"n\":823},\"seu\":{\"n\":1370},\"swu\":{\"n\":1696}},\"seu\":{\"n\":49354,\"neu\":{\"n\":1384},\"nwu\":{\"n\":1498},\"seu\":{\"n\":1616},\"swu\":{\"n\":1597}},\"swu\":{\"n\":47095,\"neu\":{\"n\":1316},\"nwu\":{\"n\":1507},\"seu\":{\"n\":1174},\"swu\":{\"n\":1443}}},\"swu\":{\"n\":55821,\"neu\":{\"n\":41029,\"neu\":{\"n\":641},\"nwu\":{\"n\":1069},\"seu\":{\"n\":1647},\"swu\":{\"n\":1554}},\"nwu\":{\"n\":12753,\"neu\":{\"n\":97},\"nwu\":{\"n\":127},\"seu\":{\"n\":534},\"swu\":{\"n\":512}},\"seu\":{\"n\":51354,\"neu\":{\"n\":1571},\"nwu\":{\"n\":1404},\"seu\":{\"n\":1613},\"swu\":{\"n\":1696}},\"swu\":{\"n\":26575,\"neu\":{\"n\":805},\"nwu\":{\"n\":353},\"seu\":{\"n\":1166},\"swu\":{\"n\":442}}}},\"nwu\":{\"n\":32290,\"ned\":{\"n\":6044,\"sed\":{\"n\":1041,\"sed\":{\"n\":17},\"swd\":{\"n\":23}},\"swd\":{\"n\":2787,\"sed\":{\"n\":13},\"swd\":{\"n\":89}}},\"nwd\":{\"n\":14078,\"nwd\":{\"n\":169,\"swd\":{\"n\":7}},\"sed\":{\"n\":2208,\"sed\":{\"n\":65},\"swd\":{\"n\":5}},\"swd\":{\"n\":6283,\"nwd\":{\"n\":70},\"sed\":{\"n\":20},\"swd\":{\"n\":98}}},\"sed\":{\"n\":15215,\"ned\":{\"n\":3184,\"ned\":{\"n\":24},\"nwd\":{\"n\":24},\"sed\":{\"n\":7},\"swd\":{\"n\":23}},\"nwd\":{\"n\":4583,\"ned\":{\"n\":57},\"nwd\":{\"n\":77},\"sed\":{\"n\":8}},\"sed\":{\"n\":178,\"ned\":{\"n\":3}},\"swd\":{\"n\":267,\"sed\":{\"n\":3}}},\"swd\":{\"n\":33449,\"ned\":{\"n\":3854,\"ned\":{\"n\":114},\"nwd\":{\"n\":26}},\"nwd\":{\"n\":13830,\"ned\":{\"n\":135},\"nwd\":{\"n\":113},\"sed\":{\"n\":160},\"swd\":{\"n\":62}},\"swd\":{\"n\":6195,\"ned\":{\"n\":70},\"nwd\":{\"n\":43},\"sed\":{\"n\":13},\"swd\":{\"n\":70}}}},\"sed\":{\"n\":81714,\"neu\":{\"n\":83095,\"neu\":{\"n\":43366,\"neu\":{\"n\":1057},\"nwu\":{\"n\":1461},\"seu\":{\"n\":1136},\"swu\":{\"n\":1420}},\"nwu\":{\"n\":45535,\"neu\":{\"n\":1455},\"nwu\":{\"n\":1103},\"seu\":{\"n\":956},\"swu\":{\"n\":664}},\"seu\":{\"n\":42542,\"neu\":{\"n\":960},\"nwu\":{\"n\":1273},\"seu\":{\"n\":936},\"swu\":{\"n\":1425}},\"swu\":{\"n\":36170,\"neu\":{\"n\":876},\"nwu\":{\"n\":681},\"seu\":{\"n\":502},\"swu\":{\"n\":1217}}},\"nwu\":{\"n\":80752,\"neu\":{\"n\":40353,\"neu\":{\"n\":725},\"nwu\":{\"n\":937},\"seu\":{\"n\":792},\"swu\":{\"n\":1394}},\"nwu\":{\"n\":44102,\"neu\":{\"n\":1247},\"nwu\":{\"n\":1224},\"seu\":{\"n\":1048},\"swu\":{\"n\":1688}},\"seu\":{\"n\":42860,\"neu\":{\"n\":1325},\"nwu\":{\"n\":733},\"seu\":{\"n\":1392},\"swu\":{\"n\":1313}},\"swu\":{\"n\":42686,\"neu\":{\"n\":984},\"nwu\":{\"n\":1599},\"seu\":{\"n\":953},\"swu\":{\"n\":1721}}},\"seu\":{\"n\":36412,\"neu\":{\"n\":21177,\"neu\":{\"n\":873},\"nwu\":{\"n\":993},\"seu\":{\"n\":114},\"swu\":{\"n\":63}},\"nwu\":{\"n\":19728,\"neu\":{\"n\":370},\"nwu\":{\"n\":566},\"seu\":{\"n\":140},\"swu\":{\"n\":260}},\"seu\":{\"n\":3},\"swu\":{\"n\":176,\"nwu\":{\"n\":5}}},\"swu\":{\"n\":36579,\"neu\":{\"n\":50672,\"neu\":{\"n\":1532},\"nwu\":{\"n\":1503},\"seu\":{\"n\":1641},\"swu\":{\"n\":1527}},\"nwu\":{\"n\":41069,\"neu\":{\"n\":918},\"nwu\":{\"n\":1600},\"seu\":{\"n\":744},\"swu\":{\"n\":1634}},\"seu\":{\"n\":1388,\"neu\":{\"n\":35},\"nwu\":{\"n\":31}},\"swu\":{\"n\":1168,\"neu\":{\"n\":15},\"nwu\":{\"n\":34}}}},\"seu\":{\"n\":16275,\"ned\":{\"n\":1438,\"nwd\":{\"n\":5},\"swd\":{\"n\":539,\"nwd\":{\"n\":11}}},\"nwd\":{\"n\":7941,\"ned\":{\"n\":477,\"ned\":{\"n\":5},\"nwd\":{\"n\":6},\"sed\":{\"n\":5}},\"nwd\":{\"n\":1391,\"ned\":{\"n\":1},\"nwd\":{\"n\":12},\"sed\":{\"n\":27}},\"sed\":{\"n\":976,\"nwd\":{\"n\":4},\"swd\":{\"n\":41}},\"swd\":{\"n\":2426,\"ned\":{\"n\":28},\"sed\":{\"n\":46}}},\"sed\":{\"n\":23752,\"ned\":{\"n\":6871,\"sed\":{\"n\":70},\"swd\":{\"n\":137}},\"nwd\":{\"n\":7512,\"ned\":{\"n\":7},\"nwd\":{\"n\":37},\"sed\":{\"n\":117},\"swd\":{\"n\":82}},\"sed\":{\"n\":365,\"ned\":{\"n\":2},\"nwd\":{\"n\":4}},\"swd\":{\"n\":338,\"ned\":{\"n\":3}}},\"swd\":{\"n\":4021,\"nwd\":{\"n\":2910,\"ned\":{\"n\":34},\"sed\":{\"n\":67}},\"swd\":{\"n\":23}}},\"swd\":{\"n\":60793,\"neu\":{\"n\":72008,\"neu\":{\"n\":42402,\"neu\":{\"n\":671},\"nwu\":{\"n\":1395},\"seu\":{\"n\":1442},\"swu\":{\"n\":1465}},\"nwu\":{\"n\":45565,\"neu\":{\"n\":1047},\"nwu\":{\"n\":1223},\"seu\":{\"n\":1565},\"swu\":{\"n\":1668}},\"seu\":{\"n\":51358,\"neu\":{\"n\":1559},\"nwu\":{\"n\":1537},\"seu\":{\"n\":1640},\"swu\":{\"n\":1676}},\"swu\":{\"n\":50652,\"neu\":{\"n\":1494},\"nwu\":{\"n\":1609},\"seu\":{\"n\":1453},\"swu\":{\"n\":1636}}},\"nwu\":{\"n\":68504,\"neu\":{\"n\":50585,\"neu\":{\"n\":1401},\"nwu\":{\"n\":1476},\"seu\":{\"n\":1623},\"swu\":{\"n\":1668}},\"nwu\":{\"n\":33220,\"neu\":{\"n\":1047},\"nwu\":{\"n\":346},\"seu\":{\"n\":1477},\"swu\":{\"n\":773}},\"seu\":{\"n\":51533,\"neu\":{\"n\":1549},\"nwu\":{\"n\":1573},\"seu\":{\"n\":1627},\"swu\":{\"n\":1626}},\"swu\":{\"n\":37141,\"neu\":{\"n\":1359},\"nwu\":{\"n\":709},\"seu\":{\"n\":1264},\"swu\":{\"n\":648}}},\"seu\":{\"n\":36559,\"neu\":{\"n\":51483,\"neu\":{\"n\":1530},\"nwu\":{\"n\":1568},\"seu\":{\"n\":1609},\"swu\":{\"n\":1702}},\"nwu\":{\"n\":50493,\"neu\":{\"n\":1493},\"nwu\":{\"n\":1596},\"seu\":{\"n\":1522},\"swu\":{\"n\":1627}},\"seu\":{\"n\":1441,\"neu\":{\"n\":31},\"nwu\":{\"n\":36}},\"swu\":{\"n\":1471,\"neu\":{\"n\":35},\"nwu\":{\"n\":40}}},\"swu\":{\"n\":35140,\"neu\":{\"n\":51247,\"neu\":{\"n\":1588},\"nwu\":{\"n\":1611},\"seu\":{\"n\":1598},\"swu\":{\"n\":1680}},\"nwu\":{\"n\":36188,\"neu\":{\"n\":1210},\"nwu\":{\"n\":606},\"seu\":{\"n\":1348},\"swu\":{\"n\":719}},\"seu\":{\"n\":1432,\"neu\":{\"n\":38},\"nwu\":{\"n\":38}},\"swu\":{\"n\":1282,\"neu\":{\"n\":34},\"nwu\":{\"n\":24}}}},\"swu\":{\"n\":6660,\"ned\":{\"n\":5076,\"ned\":{\"n\":2035,\"ned\":{\"n\":43},\"nwd\":{\"n\":8},\"sed\":{\"n\":4}},\"nwd\":{\"n\":1374,\"ned\":{\"n\":26},\"nwd\":{\"n\":23}},\"swd\":{\"n\":13}},\"nwd\":{\"n\":7275,\"ned\":{\"n\":165,\"ned\":{\"n\":8}},\"nwd\":{\"n\":3297,\"ned\":{\"n\":18},\"nwd\":{\"n\":68},\"swd\":{\"n\":26}},\"swd\":{\"n\":1143,\"nwd\":{\"n\":12},\"swd\":{\"n\":12}}},\"sed\":{\"n\":45,\"nwd\":{\"n\":53,\"nwd\":{\"n\":2}}},\"swd\":{\"n\":2820,\"nwd\":{\"n\":1841,\"ned\":{\"n\":5},\"nwd\":{\"n\":44},\"swd\":{\"n\":21}}}}}";

  return rc;
}
